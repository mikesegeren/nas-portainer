version: "3.9"

networks:
  default:
    name: infra-network
    driver: bridge

services:
  it-tools:
    image: corentinth/it-tools:latest
    container_name: it-tools
    restart: unless-stopped
    ports:
      - "8088:80"
    networks:
      - default

  glance:
    image: glanceapp/glance:latest
    container_name: glance
    restart: unless-stopped
    ports:
      - "8089:8080"
    volumes:
      - ${DOCKER_DATA}/glance/config:/app/config
      - /var/run/docker.sock:/var/run/docker.sock:ro
    networks:
      - default

  vaultwarden:
    image: vaultwarden/server:latest
    container_name: vaultwarden
    restart: unless-stopped
    ports:
      - "8082:80"
    volumes:
      - ${DOCKER_DATA}/vaultwarden/data:/data
    environment:
      - SIGNUPS_ALLOWED=${VAULTWARDEN_SIGNUPS_ALLOWED:-true}
      - ADMIN_TOKEN=${VAULTWARDEN_ADMIN_TOKEN}
      # Optional: set when behind HTTPS proxy (e.g. https://vault.example.com)
      - DOMAIN=${VAULTWARDEN_DOMAIN}
      - WEBSOCKET_ENABLED=true
    networks:
      - default
